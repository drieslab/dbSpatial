---
title: "Getting Started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Getting Started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(dbSpatial)
```

## Introduction
This vignette demonstrates how to use the `{dbSpatial}` package to create a duckdb database with spatial points and polygons starting from various data sources.

## Creating dbSpatPoints
Few words about dbSpatPoints class

### From data.frames
```{r}
library(DBI)

# create db connection in memory
duckdb_conn = DBI::dbConnect(duckdb::duckdb(), ":memory:")

# test data
test_data = data.frame(x = 1:10, y = 1:10, id = 1:10)

# df, tbl
createDbSpatPoints(conn = duckdb_conn,
                   tbl = "test_points",
                   data = test_data,
                   overwrite = TRUE)
```

### From .csv file
```{r}
# test data
test_data = data.frame(x = 1:10, y = 1:10, id = 1:10)

# write to file
write.csv(test_data, "test_data.csv", row.names = FALSE)

# load file in db
createDbSpatPoints(conn = duckdb_conn,
                   tbl = "test_points",
                   data = 'test_data.csv',
                   overwrite = TRUE)
```


### From {terra} objects: SpatVector
```{r, eval = FALSE}
# load terra package
library(terra)

duckdb_conn = DBI::dbConnect(duckdb::duckdb(), ":memory:")

# Create a data.frame with x and y coordinates and attributes
coordinates <- data.frame(x = c(100, 200, 300), y = c(500, 600, 700))
attributes <- data.frame(id = 1:3, name = c("A", "B", "C"))

# Combine the coordinates and attributes
dummy_data <- cbind(coordinates, attributes)

# Create a SpatVector from the data.frame
dummy_spatvector <- terra::vect(dummy_data, geom = c("x", "y"))

# Load SpatVector in db
createDbSpatPoints(conn = duckdb_conn,
                   tbl = "spatVector_proxy",
                   data = dummy_spatvector,
                   overwrite = TRUE)
```

### From {terra} objects: SpatRaster
```{r}
# TODO
```

## Creating dbSpatPolygons
Few words about dbSpatPolygons class

```{r}
#TODO
```



